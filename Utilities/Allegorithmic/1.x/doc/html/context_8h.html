<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Substance - Engine API: context.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>context.h File Reference</h1>Substance engine context structure and related functions definitions. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="device_8h.html">device.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="callbacks_8h.html">callbacks.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="platformdep_8h.html">platformdep.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="errors_8h.html">errors.h</a>&quot;</code><br>
<h2>Typedefs</h2>
<ul>
<li>typedef struct SubstanceContext_ <a class="el" href="context_8h.html#48eab86761ca04a42142316f2135cc79">SubstanceContext</a>
</ul>
<h2>Functions</h2>
<ul>
<li>SUBSTANCE_EXPORT unsigned int <a class="el" href="context_8h.html#e2b73c1bdf1f9de5d7d846611155c35b">substanceContextInit</a> (<a class="el" href="context_8h.html#48eab86761ca04a42142316f2135cc79">SubstanceContext</a> **substanceContext, SubstanceDevice *platformSpecificDevice)
<li>SUBSTANCE_EXPORT unsigned int <a class="el" href="context_8h.html#37bc263898eb02ebdccb1daeda1bba88">substanceContextRelease</a> (<a class="el" href="context_8h.html#48eab86761ca04a42142316f2135cc79">SubstanceContext</a> *substanceContext)
<li>SUBSTANCE_EXPORT unsigned int <a class="el" href="context_8h.html#43ac69b4cdb11f626b6aebd6d66b4878">substanceContextSetCallback</a> (<a class="el" href="context_8h.html#48eab86761ca04a42142316f2135cc79">SubstanceContext</a> *substanceContext, <a class="el" href="callbacks_8h.html#a4ecb3f487dc3c3618a6938ec003068a">SubstanceCallbackEnum</a> callbackType, void *callbackPtr)
<li>SUBSTANCE_EXPORT unsigned int <a class="el" href="context_8h.html#4110b80df547c27a9fa32b9a99cc27a2">substanceContextRestoreStates</a> (<a class="el" href="context_8h.html#48eab86761ca04a42142316f2135cc79">SubstanceContext</a> *substanceContext)
</ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Substance engine context structure and related functions definitions. 
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Christophe Soum - Allegorithmic (<a href="mailto:christophe.soum@allegorithmic.com">christophe.soum@allegorithmic.com</a>) </dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This file is part of the Substance engine headers </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>20080108 </dd></dl>
<dl class="user" compact><dt><b>Copyright (c) Allegorithmic. All rights reserved.</b></dt><dd></dd></dl>
Defines the SubstanceContext structure. Initialized from platform specific informations. This structure is necessary to create Substance handles. The context can be used to fill in function callbacks.<p>
Summary of functions defined in this file:<p>
Context creation and deletion:<ul>
<li>substanceContextInit</li><li>substanceContextRelease</li></ul>
<p>
Callback setting:<ul>
<li>substanceContextSetCallback</li></ul>
<p>
States management:<ul>
<li>substanceContextRestoreStates (advanced usage) </li></ul>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="48eab86761ca04a42142316f2135cc79"></a><!-- doxytag: member="context.h::SubstanceContext" ref="48eab86761ca04a42142316f2135cc79" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct SubstanceContext_ <a class="el" href="context_8h.html#48eab86761ca04a42142316f2135cc79">SubstanceContext</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Substance engine handle structure pre-declaration (C/C++ compatible). 
<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="e2b73c1bdf1f9de5d7d846611155c35b"></a><!-- doxytag: member="context.h::substanceContextInit" ref="e2b73c1bdf1f9de5d7d846611155c35b" args="(SubstanceContext **substanceContext, SubstanceDevice *platformSpecificDevice)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SUBSTANCE_EXPORT unsigned int substanceContextInit           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="context_8h.html#48eab86761ca04a42142316f2135cc79">SubstanceContext</a> **&nbsp;</td>
          <td class="paramname"> <em>substanceContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SubstanceDevice *&nbsp;</td>
          <td class="paramname"> <em>platformSpecificDevice</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Substance engine context initialization from platform specific data. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>substanceContext</em>&nbsp;</td><td>Pointer to the Substance context to initialize. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>platformSpecificDevice</em>&nbsp;</td><td>Platform specific structure used to initialize the context. (cf. <a class="el" href="device_8h.html" title="Platform specific API device structure.">device.h</a>) </td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>The context must be previously un-initialized or released. <p>
The platformSpecificDevice structure must be correctly filled </dd></dl>
<dl class="post" compact><dt><b>Postcondition:</b></dt><dd>The context is now valid (if no error occurred). </dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns 0 if succeeded, an error code otherwise.</dd></dl>
This can use API/hardware related resources: in particular, this function initialize the default GPU API states required by the Substance Engine. For performances purpose, not all GPU states are initialized: please read the documentation specific to your platform implementation. If GPU API states are modified by the user between the context initialization and a following computation, the substanceContextRestoreStates function must be called (e.g. callbacks functions, time-slicing computation, tweaks change, etc.).<br>
 Only one context can be created at a time on a given device. 
</div>
</div><p>
<a class="anchor" name="37bc263898eb02ebdccb1daeda1bba88"></a><!-- doxytag: member="context.h::substanceContextRelease" ref="37bc263898eb02ebdccb1daeda1bba88" args="(SubstanceContext *substanceContext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SUBSTANCE_EXPORT unsigned int substanceContextRelease           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="context_8h.html#48eab86761ca04a42142316f2135cc79">SubstanceContext</a> *&nbsp;</td>
          <td class="paramname"> <em>substanceContext</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Substance engine context release. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>substanceContext</em>&nbsp;</td><td>Pointer to the Substance context to release. </td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>The context must be previously initialized and every handle that uses this context must be previously released. </dd></dl>
<dl class="post" compact><dt><b>Postcondition:</b></dt><dd>This context is not valid any more (it can be re-initialized). </dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns 0 if succeeded, an error code otherwise. </dd></dl>

</div>
</div><p>
<a class="anchor" name="4110b80df547c27a9fa32b9a99cc27a2"></a><!-- doxytag: member="context.h::substanceContextRestoreStates" ref="4110b80df547c27a9fa32b9a99cc27a2" args="(SubstanceContext *substanceContext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SUBSTANCE_EXPORT unsigned int substanceContextRestoreStates           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="context_8h.html#48eab86761ca04a42142316f2135cc79">SubstanceContext</a> *&nbsp;</td>
          <td class="paramname"> <em>substanceContext</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Restore initial platform dependant states. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>substanceContext</em>&nbsp;</td><td>Pointer to the Substance context </td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>The context must be previously initialized. </dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns 0 if succeeded, an error code otherwise.</dd></dl>
If GPU API states are modified by the user after the context initialization (e.g. the game scene is rendered), this function must be called just before the following computation (e.g. before substanceHandleStart call or at the end of a callback function).<br>
 Partially restore the GPU API state as when the context was created. Not all GPU states are initialized: please read the documentation specific to your platform implementation. 
</div>
</div><p>
<a class="anchor" name="43ac69b4cdb11f626b6aebd6d66b4878"></a><!-- doxytag: member="context.h::substanceContextSetCallback" ref="43ac69b4cdb11f626b6aebd6d66b4878" args="(SubstanceContext *substanceContext, SubstanceCallbackEnum callbackType, void *callbackPtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SUBSTANCE_EXPORT unsigned int substanceContextSetCallback           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="context_8h.html#48eab86761ca04a42142316f2135cc79">SubstanceContext</a> *&nbsp;</td>
          <td class="paramname"> <em>substanceContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="callbacks_8h.html#a4ecb3f487dc3c3618a6938ec003068a">SubstanceCallbackEnum</a>&nbsp;</td>
          <td class="paramname"> <em>callbackType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>callbackPtr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set Substance engine context callback. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>substanceContext</em>&nbsp;</td><td>Pointer to the Substance context to set the callback for. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callbackType</em>&nbsp;</td><td>Type of the callback to set. See the SubstanceCallbackEnum enumeration in callback.h. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callbackPtr</em>&nbsp;</td><td>Pointer to the callback function to set. </td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>The context must be previously initialized. <p>
The callback function signature and callback type must match </dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns 0 if succeeded, an error code otherwise. </dd></dl>

</div>
</div><p>
</div>
<hr />
Copyright &copy; <a href="http://www.allegorithmic.com">Allegorithmic</a>
